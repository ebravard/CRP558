<!DOCTYPE html>
<html>
<head>
<title>Final Project Report</title>
<style>
        body {
            width: 70%;
        }
        
        #map {
            width: 900px;
            height: 600px;
        }
        
    .navbar { 
        overflow: hidden;
        background-color: #333;
        font-family: Arial;
        padding-bottom: 20px;
}
        
    .navbar a {
        float: left;
        font-size: 16px;
        color: white;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
}
    </style>

</head>
    
<body>
    <div class="navbar">
        <a href="https://ebravard.github.io/CRP558/">Home</a></div>

<h1 style="color: skyblue">CRP 558 Final Project Report</h1>
    
<h2 style="color: skyblue">Background</h2>
    <p>For this final project, I wanted to convey a little bit about the research I am working on here at Iowa State University. This research focuses on developing, applying, and integrating multi-state financial data regarding water quality best management practices (BMPs) for use with the USDA Agricultural Conservation Planning Framework (ACPF). The ACPF uses high-resolution elevation data and a toolbox developed within ArcGIS to spatially identify areas within agricultural watersheds for implementing BMPs.  Incorporating financial data into this process will support watershed management by assessing the economic cost factors associated with conservation planning.  This involves calculating direct long-term annualized costs for BMP installation and management in the following states - Iowa, Illinois, Indiana, Minnesota, Kansas, Missouri, Nebraska, and Wisconsin. Financial assessments use discounted cash flow techniques. BMPs accounted for include drainage management, grassed waterways, contour buffer strips/ prairie strips, water and sediment control basins, bioreactors, saturated buffers, nutrient removal wetlands, and multi-species and grassed riparian buffers. Land use opportunity costs of BMPs that require removing cropped/pastured land from production (e.g., grassed waterways, vegetative filter strips, buffer strips, wetlands), are spatially determined according to state-relevant, weighted-average crop productivity indices and land rent relationships. Calculated direct and land-use opportunity costs for BMPs are integrated with the ACPF toolbox to allow users to assess the cost-effectiveness of conservation scenarios designed to reduce nitrate-N in surface waters. To illustrate the use of these data, integration with ACPF, and outputs, Big Creek watershed in central Iowa was selected as a case study watershed. The combination of this data and tool will assist water quality stakeholders and technical service providers to determine where BMPs should be placed on the landscape to yield the most effective and lowest cost nitrate-N reduction at meaningful watershed scales. For this project, I simply focused on demonstrating a few BMPs that can be generated by the ACPF.</p><br>

<h2 style="color: skyblue">Getting Started</h2>
    <p>To begin, I gathered data from the <a href="https://benson.gis.iastate.edu/ACPF/dwnldACPF.html">ACPF Watershed Database</a>. This is where geodatabases can be downloaded for various sized watersheds across the Midwest and used within the ACPF or other GIS tools. </p> 
    
    <img src="acpf_watershed_database.JPG" alt="ACPF Watershed Database" width="923" height="525">
    <p>The map above shows the ACPF Watershed Database where data can be downloaded.</p><br>
    
<h2 style="color: skyblue">QGIS</h2>
    <p>The data gathered above came in shapefiles. In order to convert these data to be used within the Leaflet map, QGIS was used to create GeoJSON files.</p>
    <img src="qgis2.PNG" height="553" width="900" alt="QGIS project">
    <p>The shapefiles listed in the QGIS <em>Layers</em> menu above were imported onto the map and then exported as GeoJSON files. The Coordinate Reference System was set to EPSG:4326 WGS 84 in order to be compatible in the web map.</p><br>

<h2 style="color: skyblue">A look at my code:</h2>
    <h3 style="color: skyblue; text-indent: 40px">Creating a Leaflet map</h3>
    <p style="text-indent: 40px">Within Brackets, the code for my project was created. A basic Leaflet map was created and the source links for all of my GeoJSON files were added to the code.</p>
    <img src="code_head.JPG" alt="ACPF Watershed Database" width="600" height="250" style="padding-left: 40px">
    
    <h3 style="color: skyblue; text-indent: 40px">JavaScript</h3>
    <p style="text-indent: 40px">Within the JavaScript portion of my code, I selected two basemaps for my project. These basemaps can be found at <a href="https://leaflet-extras.github.io/leaflet-providers/preview/">Leaflet Providers</a> along with other free tiles and their code.</p>
    <img src="leaflet_maps.JPG" alt="Leaflet Providers" width="570" height="362" style="padding-left: 40px">
    <p style="text-indent: 40px">For this project I selected the Open Street Map and the Esri World Shaded Relief map. I created tile layers for each of these maps.</p>
    <p style="text-indent: 40px">Next, I added all of my GeoJSON files. Each element of the map was coded as its own L.geoJSON layer.</p>
    <img src="code_geoJSON_layers.JPG" alt="GeoJSON layers" width="560" height="300" style="padding-left: 40px">
    <p style="text-indent: 40px">The basemaps and overlays were the categorized and layer controls were added to create a map where the user could decide which BMPs and other watershed elements were present on the map.</p>
    <img src="code_layerControls.JPG" alt="Layer controls" width="490" height="270" style="padding-left: 40px"><br>
    <p style="text-indent: 40px">Initially, without any styling, these elements did not make sense when placed on the map. With all of the overlay layers being the same color, it would be difficult for viewers to discern different BMPs.</p>
    <img src="map%20without%20style.PNG" alt="Map before adding style" width="900" height="670" style="padding-left: 40px">
    <p style="text-indent: 40px">In order to make the map more readable, I added style to each overlay element so that it was easier to distiguish between BMPs.</p>
    <img src="map%20with%20style.PNG" alt="Map after adding style" width="900" height="670" style="padding-left: 40px">
    <p style="text-indent: 40px">Lastly, to allow for more user interaction, I coded buttons that can be used to zoom in on different BMPs so that viewers can understand where they get placed on the landscape.</p><br>
    
<h2 style="color: skyblue">Summary and comments</h2>
    <p>Overall, my project allows viewers to gain a general understanding of what the ACPF can offer, deeper knowledge about a select number of best management practices, and a brief look at elements that go into watershed planning. Ideally, more information could have been given about each specific BMP present on the map, such as area or length, perhaps in a pop-up box. This would have provided viewers with even more information about these practices. The result of this project showcases the research I am contributing to here at Iowa State University and the functionality and utility of the ACPF as a tool for watershed planners throughout the Midwest.</p> <br>
    
<p>Return to <a href="https://ebravard.github.io/CRP558/FinalProject">Final Project</a>.</p>
    
</body>
</html>

